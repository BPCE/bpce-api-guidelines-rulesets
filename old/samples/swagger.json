{
  "swagger": "2.0",
  "info": {
    "version": "0.0.1",
    "title": "prospectRemittance",
    "description": "Remittance",
    "contact": {}
  },
  "host": "fkcapigateway.dev.mycloud.intranatixis.com",
  "basePath": "/prospectRemittance/V0",
  "schemes": [
    "http"
  ],
  "consumes": [
    "application/json"
  ],
  "produces": [
    "application/json"
  ],
  "paths": {
    "/prospectRemittances": {
      "get": {
        "description": "Liste des remises en cours avec nombre de factues associ�es",
        "summary": "getProspectRemittancesV0",
        "tags": [
          "Remise Prospect"
        ],
        "operationId": "ProspectRemittancesGet",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectId",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "Identifiant du prospect"
          },
          {
            "name": "caseId",
            "in": "query",
            "required": false,
            "type": "string",
            "description": "n� de dossier"
          }
        ],
        "responses": {
          "200": {
            "description": "Liste des remises",
            "schema": {
              "$ref": "#/definitions/ProspectRemittances"
            },
            "headers": {}
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      },
      "post": {
        "description": "Creation d'une Remise Prospect",
        "summary": "createProspectRemittanceV0",
        "tags": [
          "Remise Prospect"
        ],
        "operationId": "ProspectRemittancesPost",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "body",
            "in": "body",
            "required": true,
            "description": "",
            "schema": {
              "$ref": "#/definitions/prospectRemittanceCreate"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Remise cr��e",
            "schema": {
              "$ref": "#/definitions/ProspectRemittance"
            },
            "headers": {}
          },
          "400": {
            "description": "Erreur dans la requ�te",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/prospectRemittances/{prospectRemittanceId}": {
      "patch": {
        "description": "(permet en autre la maj du statut de la remise prospect)\n",
        "summary": "updateProspectRemittanceV0",
        "tags": [
          "Remise Prospect"
        ],
        "operationId": "ProspectRemittancesByProspectRemittanceIdPatch",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectRemittanceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Remittance Id"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "description": "",
            "schema": {
              "$ref": "#/definitions/ProspectRemittanceUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Remise modifi�e",
            "schema": {
              "$ref": "#/definitions/ProspectRemittance"
            },
            "headers": {}
          },
          "400": {
            "description": "Erreur dans la requ�te",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Remise non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/prospectInvoices/{prospectInvoiceId}": {
      "delete": {
        "description": "Suppression facture sur remise prospect",
        "summary": "deleteProspectInvoiceV0",
        "tags": [
          "Factures Prospect"
        ],
        "operationId": "ProspectInvoicesByProspectInvoiceIdDelete",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectInvoiceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Prospect Invoice Id"
          }
        ],
        "responses": {
          "204": {
            "description": "La facture est supprim�e",
            "headers": {}
          },
          "400": {
            "description": "Suppression non autoris�e (seul le prospect peut supprimer une facture) \n",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Facture non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      },
      "put": {
        "description": "Remplacement d'une facture prospect",
        "summary": "replaceProspectInvoiceV0",
        "tags": [
          "Factures Prospect"
        ],
        "operationId": "ProspectInvoicesByProspectInvoiceIdPut",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectInvoiceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Prospect Invoice Id"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "description": "",
            "schema": {
              "$ref": "#/definitions/ProspectInvoiceCreate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Facture mise � jour",
            "schema": {
              "$ref": "#/definitions/ProspectInvoice"
            },
            "headers": {}
          },
          "400": {
            "description": "Donn�es transmises incorrectes ou incompl�tes",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Facture non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      },
      "patch": {
        "description": "Modification d'une facture",
        "summary": "updateProspectInvoiceV0",
        "tags": [
          "Factures Prospect"
        ],
        "operationId": "ProspectInvoicesByProspectInvoiceIdPatch",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectInvoiceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Prospect Invoice Id"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "description": "",
            "schema": {
              "$ref": "#/definitions/ProspectInvoiceUpdate"
            }
          }
        ],
        "responses": {
          "200": {
            "description": "Facture mise � jour",
            "schema": {
              "$ref": "#/definitions/ProspectInvoice"
            },
            "headers": {}
          },
          "400": {
            "description": "Erreur dans la requ�te",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Facture non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/prospectRemittances/{prospectRemittanceId}/prospectInvoices": {
      "get": {
        "description": "Liste des factures associ�es � une remise prospect",
        "summary": "listProspectInvoicesV0",
        "tags": [
          "Factures Prospect"
        ],
        "operationId": "ProspectRemittancesProspectInvoicesByProspectRemittanceIdGet",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectRemittanceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Identifiant de la Remise"
          }
        ],
        "responses": {
          "200": {
            "description": "Liste des factures",
            "schema": {
              "$ref": "#/definitions/ProspectInvoices"
            },
            "headers": {}
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Remise non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      },
      "post": {
        "description": "Ajout d'une facture",
        "summary": "createProspectInvoiceV0",
        "tags": [
          "Factures Prospect"
        ],
        "operationId": "ProspectRemittancesProspectInvoicesByProspectRemittanceIdPost",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "prospectRemittanceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Identifiant de la Remise"
          },
          {
            "name": "body",
            "in": "body",
            "required": true,
            "description": "",
            "schema": {
              "$ref": "#/definitions/ProspectInvoiceCreate"
            }
          }
        ],
        "responses": {
          "201": {
            "description": "Prospect Invoice created",
            "schema": {
              "$ref": "#/definitions/ProspectInvoice"
            },
            "headers": {}
          },
          "400": {
            "description": "Erreur dans la requ�te",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Remise non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/documents/{documentId}": {
      "get": {
        "description": "Binaire du document",
        "summary": "getDocumentV0",
        "tags": [
          "Documents de Factures (PDF/PNG/JPG)"
        ],
        "operationId": "DocumentsByDocumentIdGet",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Document Id"
          }
        ],
        "responses": {
          "200": {
            "description": "Binaire du document",
            "schema": {
              "type": "object"
            },
            "headers": {}
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Document non trouv�",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      },
      "delete": {
        "description": "suppression d'un document de facture",
        "summary": "deleteInvoiceDocumentV0",
        "tags": [
          "Documents de Factures (PDF/PNG/JPG)"
        ],
        "operationId": "DocumentsByDocumentIdDelete",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "parameters": [
          {
            "name": "documentId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Document Id"
          }
        ],
        "responses": {
          "204": {
            "description": "Document supprim�",
            "headers": {}
          },
          "400": {
            "description": "Suppression non autoris�e (seul le prospect peut supprimer un document) \n",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Document non trouv�",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    },
    "/prospectInvoices/{prospectInvoiceId}/documents": {
      "post": {
        "description": "Nom de fichier et type de fichier fournis dans le header du Multi-part.\nhttps://swagger.io/docs/specification/describing-request-body/file-upload/\n",
        "summary": "createInvoiceDocumentV0",
        "tags": [
          "Documents de Factures (PDF/PNG/JPG)"
        ],
        "operationId": "ProspectInvoicesDocumentsByProspectInvoiceIdPost",
        "deprecated": false,
        "produces": [
          "application/json"
        ],
        "consumes": [
          "multipart/form-data"
        ],
        "parameters": [
          {
            "name": "prospectInvoiceId",
            "in": "path",
            "required": true,
            "type": "string",
            "description": "Invoice Id"
          },
          {
            "name": "file",
            "in": "formData",
            "required": true,
            "type": "file",
            "format": "file",
            "description": ""
          },
          {
            "name": "type",
            "in": "formData",
            "required": false,
            "enum": [
              "invoice",
              "order",
              "other"
            ],
            "type": "string",
            "description": "Facture / Bon de commande / Autre"
          }
        ],
        "responses": {
          "201": {
            "description": "Document ajout� � la Facture",
            "schema": {
              "$ref": "#/definitions/Document"
            },
            "headers": {}
          },
          "400": {
            "description": "Erreur dans la requ�te",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "401": {
            "description": "Probl�me d'autorisation",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "404": {
            "description": "Facture non trouv�e",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          },
          "default": {
            "description": "Erreur inattendue",
            "schema": {
              "$ref": "#/definitions/Error"
            }
          }
        }
      }
    }
  },
  "definitions": {
    "InvoicesStatistics": {
      "title": "InvoicesStatistics",
      "type": "object",
      "properties": {
        "totalInvoiceCount": {
          "description": "nombre total de factures associ�es � la remise",
          "type": "integer",
          "format": "int32"
        },
        "notTransmittedInvoiceCount": {
          "description": "nombre de factures non encore transmises",
          "type": "integer",
          "format": "int32"
        },
        "transmittedInvoiceCount": {
          "description": "nombre de factures transmises",
          "type": "integer",
          "format": "int32"
        },
        "analyzedInvoiceCount": {
          "description": "nombre de factures analys�es",
          "type": "integer",
          "format": "int32"
        }
      },
      "required": [
        "totalInvoiceCount",
        "notTransmittedInvoiceCount",
        "transmittedInvoiceCount",
        "analyzedInvoiceCount"
      ]
    },
    "Type1": {
      "title": "Type1",
      "description": "Facture / Bon de commande / Autre",
      "example": "invoice",
      "type": "string",
      "enum": [
        "invoice",
        "order",
        "other"
      ]
    },
    "Type": {
      "title": "Type",
      "description": "Facture / Bon de commande/ Autre",
      "example": "invoice",
      "type": "string",
      "enum": [
        "invoice",
        "order",
        "other"
      ]
    },
    "ProspectInvoice": {
      "title": "ProspectInvoice",
      "description": "Les donn�es de type \"check\" ne sont accessibles que pour les commerciaux (les donn�es doivent �tre absentes pour un prospect, et non renvoy�es nulles)",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "prospectRemittanceId": {
          "type": "string"
        },
        "status": {
          "type": "string"
        },
        "reference": {
          "description": "n� de facture prospect",
          "example": "7654321",
          "type": "string"
        },
        "issueDate": {
          "type": "string",
          "format": "date"
        },
        "dueDate": {
          "type": "string",
          "format": "date"
        },
        "amount": {
          "$ref": "#/definitions/Amount"
        },
        "debtorName": {
          "type": "string"
        },
        "debtorInsuranceCheck": {
          "type": "boolean"
        },
        "dateCheck": {
          "type": "boolean"
        },
        "debtorActivityCheck": {
          "type": "boolean"
        },
        "creationDate": {
          "type": "string",
          "format": "date-time"
        },
        "documents": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Document"
          }
        }
      },
      "required": [
        "id",
        "prospectRemittanceId",
        "status",
        "reference",
        "issueDate",
        "dueDate",
        "amount",
        "creationDate"
      ]
    },
    "Error1": {
      "title": "Error1",
      "type": "object",
      "properties": {
        "code": {
          "description": "Error Code",
          "example": "INVALID_FORMAT",
          "type": "string"
        },
        "message": {
          "description": "Error Message",
          "example": "Invalid format",
          "type": "string"
        },
        "attribute": {
          "description": "attribute name at the error origin",
          "example": "userFrom",
          "type": "string"
        }
      },
      "required": [
        "code",
        "message"
      ]
    },
    "Amount": {
      "title": "Amount",
      "type": "object",
      "properties": {
        "value": {
          "type": "number",
          "format": "double"
        },
        "currency": {
          "description": "Devise (code iso 4217)",
          "example": "EUR",
          "type": "string"
        }
      },
      "required": [
        "value",
        "currency"
      ]
    },
    "ProspectInvoiceUpdate": {
      "title": "ProspectInvoiceUpdate",
      "description": "Seul le commercial peut modifier les donn�es type \"check\"",
      "type": "object",
      "properties": {
        "status": {
          "type": "string"
        },
        "reference": {
          "description": "n� de facture prospect",
          "example": "7654321",
          "type": "string"
        },
        "issueDate": {
          "type": "string",
          "format": "date"
        },
        "dueDate": {
          "type": "string",
          "format": "date"
        },
        "amount": {
          "$ref": "#/definitions/Amount"
        },
        "debtorName": {
          "type": "string"
        },
        "debtorInsuranceCheck": {
          "type": "boolean"
        },
        "dateCheck": {
          "type": "boolean"
        },
        "debtorActivityCheck": {
          "type": "boolean"
        }
      }
    },
    "Status": {
      "title": "Status",
      "example": "analyzed",
      "type": "string",
      "enum": [
        "analyzed",
        "closed"
      ]
    },
    "Document": {
      "title": "Document",
      "type": "object",
      "properties": {
        "id": {
          "type": "string"
        },
        "filename": {
          "type": "string"
        },
        "type": {
          "$ref": "#/definitions/Type"
        },
        "contentType": {
          "type": "string"
        }
      },
      "required": [
        "id",
        "filename",
        "contentType"
      ]
    },
    "DocumentCreate": {
      "title": "DocumentCreate",
      "description": "Nom de fichier et type de fichier fournis dans le header du Multi-part\nhttps://swagger.io/docs/specification/describing-request-body/file-upload/",
      "type": "object",
      "properties": {
        "type": {
          "$ref": "#/definitions/Type1"
        },
        "file": {
          "type": "string",
          "format": "binary"
        }
      },
      "required": [
        "file"
      ]
    },
    "ProspectInvoiceCreate": {
      "title": "ProspectInvoiceCreate",
      "type": "object",
      "properties": {
        "reference": {
          "description": "n� de facture prospect",
          "example": "7654321",
          "type": "string"
        },
        "issueDate": {
          "type": "string",
          "format": "date"
        },
        "dueDate": {
          "type": "string",
          "format": "date"
        },
        "amount": {
          "$ref": "#/definitions/Amount"
        },
        "debtorName": {
          "type": "string"
        }
      },
      "required": [
        "reference",
        "issueDate",
        "dueDate",
        "amount"
      ]
    },
    "Error": {
      "title": "Error",
      "type": "object",
      "properties": {
        "errors": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/Error1"
          },
          "minItems": 1
        }
      },
      "required": [
        "errors"
      ]
    },
    "ProspectInvoices": {
      "title": "ProspectInvoices",
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ProspectInvoice"
          }
        }
      },
      "required": [
        "items"
      ]
    },
    "ProspectRemittance": {
      "title": "ProspectRemittance",
      "type": "object",
      "properties": {
        "id": {
          "description": "Propect Remittance Id",
          "type": "string"
        },
        "status": {
          "example": "pending",
          "type": "string"
        },
        "commercialId": {
          "type": "string"
        },
        "prospectId": {
          "type": "string"
        },
        "caseId": {
          "type": "string"
        },
        "creationDate": {
          "type": "string",
          "format": "date-time"
        },
        "invoicesStatistics": {
          "$ref": "#/definitions/InvoicesStatistics"
        }
      },
      "required": [
        "id",
        "status",
        "commercialId",
        "prospectId",
        "caseId",
        "creationDate"
      ]
    },
    "prospectRemittanceCreate": {
      "title": "prospectRemittanceCreate",
      "type": "object",
      "properties": {
        "CommercialId": {
          "type": "string"
        },
        "prospectId": {
          "example": "123456789",
          "type": "string"
        },
        "caseId": {
          "example": "20190412",
          "type": "string"
        }
      },
      "required": [
        "prospectId",
        "caseId"
      ]
    },
    "ProspectRemittances": {
      "title": "ProspectRemittances",
      "type": "object",
      "properties": {
        "items": {
          "type": "array",
          "items": {
            "$ref": "#/definitions/ProspectRemittance"
          }
        }
      },
      "required": [
        "items"
      ]
    },
    "ProspectRemittanceUpdate": {
      "title": "ProspectRemittanceUpdate",
      "type": "object",
      "properties": {
        "status": {
          "$ref": "#/definitions/Status"
        }
      }
    }
  },
  "tags": [
    {
      "name": "Remise Prospect",
      "description": ""
    },
    {
      "name": "Factures Prospect",
      "description": ""
    },
    {
      "name": "Documents de Factures (PDF/PNG/JPG)",
      "description": ""
    }
  ]
}